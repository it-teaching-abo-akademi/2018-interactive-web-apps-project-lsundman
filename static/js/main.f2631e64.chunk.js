(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{221:function(t,e,a){t.exports=a(598)},226:function(t,e,a){},228:function(t,e,a){},255:function(t,e){},257:function(t,e){},289:function(t,e){},290:function(t,e){},356:function(t,e){},598:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(215),s=a.n(o),i=(a(226),a(50)),c=a(21),l=a(29),u=a(22),h=a(17),p=a(23),d=(a(228),a(71)),f=a.n(d),m=(a(219),a(127)),S=864e5;function b(){return(b=Object(m.a)(f.a.mark(function t(e){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",F().stocks.quote(e,{datatype:"json"}).then(function(t){return t["Global Quote"]==={}?void 0:parseInt(t["Global Quote"]["05. price"])}));case 1:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function y(){return(y=Object(m.a)(f.a.mark(function t(e,a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",F().stocks.daily(e,{outputsize:"full",datatype:"json"}).then(function(t){var e=t["Time Series (Daily)"];return a.map(function(t){return t in e?e[t]["4. close"]:void 0})}));case 1:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function v(t,e){for(var a=[],n=new Date(t).getTime(),r=new Date(e).getTime();r>=n;)a.unshift(new Date(r)),r-=S;return a.map(function(t){return"".concat(t.getFullYear(),"-").concat(("0"+(t.getMonth()+1)).slice(-2),"-").concat(("0"+t.getDate()).slice(-2))})}function g(t){return"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate())}var E=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(u.a)(this,Object(h.a)(e).call(this,t))).getId=function(){return"SPMS-ticker: ".concat(btoa(a.props.symbol+a.props.amount))},a.componentDidMount=function(){(function(t){return b.apply(this,arguments)})(a.props.symbol).then(function(t){a.setState({price:t,invalidSymbol:void 0===t}),void 0!=t&&a.props.onPriceChange(t*a.props.amount)})},a.state={price:void 0,invalidSymbol:!1},a}return Object(p.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t,e,a=this;if(void 0===this.state.price)t="...",e="...";else{t="USD"===this.props.currency?"$ ".concat(this.state.price):"\u20ac ".concat(Math.round(this.state.price*this.props.forexRate*100)/100);var n=Math.round(this.state.price*this.props.amount*100)/100;e="USD"===this.props.currency?"$ ".concat(n):"\u20ac ".concat(Math.round(n*this.props.forexRate*100)/100)}return r.a.createElement("tr",{className:this.state.invalidSymbol?"invalid-symbol":""},r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",onChange:function(t){return a.props.onSelect(t.target.checked)},checked:this.props.selected})),r.a.createElement("td",null," ",this.props.symbol," "),r.a.createElement("td",null,t),r.a.createElement("td",null," ",this.props.amount," "),r.a.createElement("td",null,e))}}]),e}(r.a.Component),L=a(70),w=a(220),k=function(t){function e(t,a){var n;return Object(c.a)(this,e),(n=Object(u.a)(this,Object(h.a)(e).call(this,t))).storage=window.localStorage,n.componentWillMount=function(){n.setState(n.loadState())},n.componentWillUnmount=function(){n.saveState(n.state)},n.setState=function(t){Object(w.a)(Object(h.a)(e.prototype),"setState",Object(L.a)(n)).call(Object(L.a)(n),t),n.saveState(t)},n.loadState=function(){var t=n.storage.getItem(n.getId());return void 0!=t?JSON.parse(t):n.defaultStateGet()},n.saveState=function(t){n.storage.setItem(n.getId(),JSON.stringify(t))},n.defaultStateGet=a,n.state=n.defaultStateGet(),n}return Object(p.a)(e,t),e}(n.Component),O=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(u.a)(this,Object(h.a)(e).call(this,t))).state={tickerSymbol:"",shareAmount:1},a}return Object(p.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==t.state.tickerSymbol&&0!==t.state.shareAmount&&t.props.addTicker(t.state.tickerSymbol,t.state.shareAmount)}},r.a.createElement("label",null,"Ticker symbol",r.a.createElement("input",{type:"text",value:this.state.tickerSymbol,onChange:function(e){t.setState({tickerSymbol:e.target.value})}})),r.a.createElement("label",null,"Quantity",r.a.createElement("input",{type:"number",value:this.state.shareAmount,onChange:function(e){t.setState({shareAmount:e.target.value})}})),r.a.createElement("input",{type:"submit",value:"Submit"}),r.a.createElement("button",{onClick:function(){return t.props.cancel()}},"Cancel"))}}]),e}(n.Component),j=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(u.a)(this,Object(h.a)(e).call(this,t,function(){return{shareList:[],viewMain:!0,currency:"USD"}}))).addStock=function(t,e){a.state.shareList.some(function(e){return e.shareSymbol===t})?window.alert("You've already added this stock!"):a.setState({shareList:Object(i.a)(a.state.shareList).concat([{shareSymbol:t,shareAmount:e,selected:!1,price:-1}]),viewMain:!0})},a.removeStocks=function(t){a.setState({shareList:a.state.shareList.filter(function(e){return!t.includes(e.shareSymbol)}),viewMain:!0})},a.setSelected=function(t,e){a.setState({shareList:a.state.shareList.map(function(a){return a.shareSymbol===t?{shareSymbol:a.shareSymbol,shareAmount:a.shareAmount,selected:e,price:a.price}:a}),viewMain:a.state.viewMain})},a.getId=function(){return"SPMS-portfolio-".concat(a.props.name)},a}return Object(p.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t,e,a=this,n=this.state.shareList.map(function(t){return r.a.createElement(E,{key:"".concat(t.shareSymbol,"-").concat(t.shareAmount),symbol:t.shareSymbol,amount:t.shareAmount,onSelect:function(e){return a.setSelected(t.shareSymbol,e)},onPriceChange:function(e){a.setState({shareList:a.state.shareList.map(function(a){return a.shareSymbol===t.shareSymbol?{shareSymbol:a.shareSymbol,shareAmount:a.shareAmount,selected:a.selected,price:e}:a}),viewMain:a.state.viewMain})},selected:t.selected,currency:a.props.currency,forexRate:a.props.forexRate})});return n.length>0&&(t=r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Stock"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Quantity"),r.a.createElement("th",null,"Total value"))),r.a.createElement("tbody",null,n),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null,"USD"===this.props.currency?"$ ":"\u20ac ",Math.round(this.state.shareList.map(function(t){return t.price}).reduce(function(t,e){return t+e})*("USD"===this.props.currency?1:this.props.forexRate)*100)/100))))),e=this.state.viewMain?r.a.createElement("div",null,t,r.a.createElement("div",{className:"button-row"},r.a.createElement("button",{onClick:function(){a.setState({shareList:a.state.shareList,viewMain:!1})}},"Add stock"),r.a.createElement("button",{disabled:!this.state.shareList.some(function(t){return t.selected}),onClick:function(){a.removeStocks(a.state.shareList.filter(function(t){return t.selected}).map(function(t){return t.shareSymbol}))}},"Remove selected"),r.a.createElement("button",{disabled:!this.state.shareList.some(function(t){return t.selected}),onClick:function(){return a.props.onGraphShow(a.state.shareList.filter(function(t){return t.selected}).map(function(t){return t.shareSymbol}))}},"Show graph"))):r.a.createElement(O,{addTicker:this.addStock,cancel:function(){a.setState({shareList:a.state.shareList,viewMain:!0})}}),r.a.createElement("li",{className:"spms-portfolio"},r.a.createElement("button",{className:"close-button",onClick:function(){a.props.onRemove()}},"X"),r.a.createElement("div",null,r.a.createElement("h2",null,this.props.name),e))}}]),e}(k),x=a(216),R=a.n(x),D=a(217),C=function(t){function e(t){var a;Object(c.a)(this,e),(a=Object(u.a)(this,Object(h.a)(e).call(this,t))).componentWillMount=function(){a.updateData()},a.componentDidUpdate=function(t){t.shareList!=a.props.shareList&&(a.setState({graphStart:a.state.graphStart,graphEnd:a.state.graphEnd,labels:a.state.labels,dataSetsList:[]}),a.updateData())},a.updateData=function(){a.props.shareList.forEach(function(t){(function(t,e){return y.apply(this,arguments)})(t,a.state.labels).then(function(e){a.setState({graphStart:a.state.graphStart,graphEnd:a.state.graphEnd,labels:a.state.labels,dataSetsList:Object(i.a)(a.state.dataSetsList).concat([{label:t,data:e}])})})})};var n,r,o=g((n=new Date,r=7,new Date(n.getTime()-r*S))),s=g(new Date),l=v(o,s);return a.state={graphStart:o,graphEnd:s,labels:l,dataSetsList:[]},a}return Object(p.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"graph"},r.a.createElement("button",{className:"close-button",onClick:this.props.onCloseButtonClick},"X"),r.a.createElement(D.a,{data:{labels:this.state.labels,datasets:"USD"===this.props.currency?this.state.dataSetsList:this.state.dataSetsList.map(function(e){return{label:e.label,data:e.data.map(function(e){return Math.round(e*t.props.forexRate*100)/100})}})},options:{spanGaps:!0},redraw:!0}),r.a.createElement("input",{type:"date",value:this.state.graphStart,onChange:function(e){t.setState({graphStart:e.target.value,graphEnd:t.state.graphEnd,labels:v(e.target.value,t.state.graphStart),dataSetsList:t.state.dataSetsList}),t.updateData()}}),r.a.createElement("input",{type:"date",value:this.state.graphEnd,onChange:function(e){t.setState({graphStart:t.state.graphStart,graphEnd:e.target.value,labels:v(t.state.graphStart,e.target.value),dataSetsList:t.state.dataSetsList}),t.updateData()}}))}}]),e}(n.Component),M=new R.a("9LUUJN34EO841037");function F(){return M}var U=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(u.a)(this,Object(h.a)(e).call(this,t,function(){return{portfolioList:[],addFieldValue:"",graphList:[],forexRate:1,currency:"USD"}}))).componentDidMount=function(){1===a.state.forexRate&&F().forex.rate("USD","EUR").then(function(t){a.setState({forexRate:t["Realtime Currency Exchange Rate"]["5. Exchange Rate"],graphList:a.state.graphList,portfolioList:a.state.portfolioList,addFieldValue:a.state.addFieldValue,currency:a.state.currency})})},a.addPortfolio=function(t){t.preventDefault(),a.state.portfolioList.length<10?""!=a.state.addFieldValue&&(a.state.portfolioList.some(function(t){return t===a.state.addFieldValue})?window.alert("Portfolio names should be unique"):a.setState({portfolioList:Object(i.a)(a.state.portfolioList).concat([a.state.addFieldValue]),addFieldValue:"",graphList:a.state.graphList,forexRate:a.state.forexRate,currency:a.state.currency})):window.alert("You can only have 10 portfolios configured at the same time")},a.removePortfolio=function(t){""!=t&&a.setState({portfolioList:a.state.portfolioList.filter(function(e){return e!=t}),addFieldValue:"",graphList:a.state.graphList,forexRate:a.state.forexRate,currency:a.state.currency})},a.getId=function(){return"SPMS-app"},a}return Object(p.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t,e=this,a=this.state.portfolioList.map(function(t){return r.a.createElement(j,{key:t,name:t,onRemove:function(){return e.removePortfolio(t)},onGraphShow:function(t){e.setState({portfolioList:e.state.portfolioList,addFieldValue:e.state.addFieldValue,graphList:t,forexRate:e.state.forexRate,currency:e.state.currency})},forexRate:e.state.forexRate,currency:e.state.currency})});return t=this.state.graphList.length>0?r.a.createElement(C,{shareList:this.state.graphList,apiConnection:F(),onCloseButtonClick:function(){e.setState({portfolioList:e.state.portfolioList,addFieldValue:e.state.addFieldValue,graphList:[],forexRate:e.state.forexRate,currency:e.state.currency})},forexRate:this.state.forexRate,currency:this.state.currency}):null,r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement("form",{onSubmit:this.addPortfolio},r.a.createElement("input",{className:"add-portfolio-field",onChange:function(t){e.setState({portfolioList:e.state.portfolioList,addFieldValue:t.target.value,graphList:e.state.graphList,forexRate:e.state.forexRate,currency:e.state.currency})},type:"text",value:this.state.addFieldValue,placeholder:"Enter portfolio name here and press enter"})),r.a.createElement("button",{onClick:function(){e.setState({currency:"USD"===e.state.currency?"EUR":"USD",portfolioList:e.state.portfolioList,addFieldValue:e.state.addFieldValue,graphList:e.state.graphList,forexRate:e.state.forexRate})}},"USD"===this.state.currency?"$":"\u20ac")),t,r.a.createElement("ul",null,a))}}]),e}(k);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[221,2,1]]]);
//# sourceMappingURL=main.f2631e64.chunk.js.map