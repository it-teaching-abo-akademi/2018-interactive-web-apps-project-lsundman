(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{221:function(t,e,a){t.exports=a(598)},226:function(t,e,a){},228:function(t,e,a){},255:function(t,e){},257:function(t,e){},289:function(t,e){},290:function(t,e){},356:function(t,e){},598:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(215),s=a.n(o),i=(a(226),a(50)),l=a(21),c=a(29),u=a(22),h=a(17),p=a(23),d=(a(228),a(71)),m=a.n(d),f=(a(219),a(127)),b=864e5;function S(){return(S=Object(f.a)(m.a.mark(function t(e){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",A().stocks.quote(e,{datatype:"json"}).then(function(t){return t["Global Quote"]==={}?void 0:t["Global Quote"]["05. price"]}));case 1:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function v(){return(v=Object(f.a)(m.a.mark(function t(e,a){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",A().stocks.daily(e,{outputsize:"full",datatype:"json"}).then(function(t){var e=t["Time Series (Daily)"];return a.map(function(t){return t in e?e[t]["4. close"]:void 0})}));case 1:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function g(t,e){for(var a=[],n=new Date(t).getTime(),r=new Date(e).getTime();r>=n;)a.unshift(new Date(r)),r-=b;return a.map(function(t){return"".concat(t.getFullYear(),"-").concat(("0"+(t.getMonth()+1)).slice(-2),"-").concat(("0"+t.getDate()).slice(-2))})}function E(t){return"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate())}var y=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(u.a)(this,Object(h.a)(e).call(this,t))).getId=function(){return"SPMS-ticker: ".concat(btoa(a.props.symbol+a.props.amount))},a.componentDidMount=function(){(function(t){return S.apply(this,arguments)})(a.props.symbol).then(function(t){a.setState({price:t,invalidSymbol:void 0===t})})},a.state={price:void 0,invalidSymbol:!1},a}return Object(p.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t,e,a=this;return void 0===this.state.price?(t="...",e="..."):(t=this.state.price,e=Math.round(this.state.price*this.props.amount*100)/100),r.a.createElement("tr",{className:this.state.invalidSymbol?"invalid-symbol":""},r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",onChange:function(t){return a.props.onSelect(t.target.checked)},checked:this.props.selected})),r.a.createElement("td",null," ",this.props.symbol," "),r.a.createElement("td",null,"$ ",t),r.a.createElement("td",null," ",this.props.amount," "),r.a.createElement("td",null,"$ ",e))}}]),e}(r.a.Component),L=a(70),w=a(220),k=function(t){function e(t,a){var n;return Object(l.a)(this,e),(n=Object(u.a)(this,Object(h.a)(e).call(this,t))).storage=window.localStorage,n.componentWillMount=function(){n.setState(n.loadState())},n.componentWillUnmount=function(){n.saveState(n.state)},n.setState=function(t){Object(w.a)(Object(h.a)(e.prototype),"setState",Object(L.a)(n)).call(Object(L.a)(n),t),n.saveState(t)},n.loadState=function(){var t=n.storage.getItem(n.getId());return void 0!=t?JSON.parse(t):n.defaultStateGet()},n.saveState=function(t){n.storage.setItem(n.getId(),JSON.stringify(t))},n.defaultStateGet=a,n.state=n.defaultStateGet(),n}return Object(p.a)(e,t),e}(n.Component),O=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(u.a)(this,Object(h.a)(e).call(this,t))).state={tickerSymbol:"",shareAmount:1},a}return Object(p.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==t.state.tickerSymbol&&0!==t.state.shareAmount&&t.props.addTicker(t.state.tickerSymbol,t.state.shareAmount)}},r.a.createElement("label",null,"Ticker symbol",r.a.createElement("input",{type:"text",value:this.state.tickerSymbol,onChange:function(e){t.setState({tickerSymbol:e.target.value})}})),r.a.createElement("label",null,"Quantity",r.a.createElement("input",{type:"number",value:this.state.shareAmount,onChange:function(e){t.setState({shareAmount:e.target.value})}})),r.a.createElement("input",{type:"submit",value:"Submit"}),r.a.createElement("button",{onClick:function(){return t.props.cancel()}},"Cancel"))}}]),e}(n.Component),j=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(u.a)(this,Object(h.a)(e).call(this,t,function(){return{shareList:[],viewMain:!0}}))).addStock=function(t,e){a.state.shareList.some(function(e){return e.shareSymbol===t})?window.alert("You've already added this stock!"):a.setState({shareList:Object(i.a)(a.state.shareList).concat([{shareSymbol:t,shareAmount:e,selected:!1}]),viewMain:!0})},a.removeStocks=function(t){a.setState({shareList:a.state.shareList.filter(function(e){return!t.includes(e.shareSymbol)}),viewMain:!0})},a.setSelected=function(t,e){a.setState({shareList:a.state.shareList.map(function(a){return a.shareSymbol===t?{shareSymbol:a.shareSymbol,shareAmount:a.shareAmount,selected:e}:a}),viewMain:a.state.viewMain})},a.getId=function(){return"SPMS-portfolio-".concat(a.props.name)},a}return Object(p.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t,e,a=this,n=this.state.shareList.map(function(t){return r.a.createElement(y,{key:"".concat(t.shareSymbol,"-").concat(t.shareAmount),symbol:t.shareSymbol,amount:t.shareAmount,onSelect:function(e){return a.setSelected(t.shareSymbol,e)},selected:t.selected})});return n.length>0&&(t=r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Stock"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Quantity"),r.a.createElement("th",null,"Total value"))),r.a.createElement("tbody",null,n))),e=this.state.viewMain?r.a.createElement("div",null,t,r.a.createElement("button",{onClick:function(){a.props.onRemove()}},"Remove portfolio"),r.a.createElement("div",{className:"button-row"},r.a.createElement("button",{onClick:function(){a.setState({shareList:a.state.shareList,viewMain:!1})}},"Add stock"),r.a.createElement("button",{disabled:!this.state.shareList.some(function(t){return t.selected}),onClick:function(){a.removeStocks(a.state.shareList.filter(function(t){return t.selected}).map(function(t){return t.shareSymbol}))}},"Remove selected"),r.a.createElement("button",{disabled:!this.state.shareList.some(function(t){return t.selected}),onClick:function(){return a.props.onGraphShow(a.state.shareList.filter(function(t){return t.selected}).map(function(t){return t.shareSymbol}))}},"Show graph"))):r.a.createElement(O,{addTicker:this.addStock,cancel:function(){a.setState({shareList:a.state.shareList,viewMain:!0})}}),r.a.createElement("li",{className:"spms-portfolio"},r.a.createElement("div",null,r.a.createElement("h2",null,this.props.name),e))}}]),e}(k),C=a(216),D=a.n(C),M=a(217),F=function(t){function e(t){var a;Object(l.a)(this,e),(a=Object(u.a)(this,Object(h.a)(e).call(this,t))).componentWillMount=function(){a.updateData()},a.componentDidUpdate=function(t){t.shareList!=a.props.shareList&&(a.setState({graphStart:a.state.graphStart,graphEnd:a.state.graphEnd,labels:a.state.labels,dataSetsList:[]}),a.updateData())},a.updateData=function(){a.props.shareList.forEach(function(t){(function(t,e){return v.apply(this,arguments)})(t,a.state.labels).then(function(e){a.setState({graphStart:a.state.graphStart,graphEnd:a.state.graphEnd,labels:a.state.labels,dataSetsList:Object(i.a)(a.state.dataSetsList).concat([{label:t,data:e}])})})})};var n,r,o=E((n=new Date,r=7,new Date(n.getTime()-r*b))),s=E(new Date),c=g(o,s);return a.state={graphStart:o,graphEnd:s,labels:c,dataSetsList:[]},a}return Object(p.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"graph"},r.a.createElement("button",{onClick:this.props.onCloseButtonClick},"X"),r.a.createElement(M.a,{data:{labels:this.state.labels,datasets:this.state.dataSetsList},options:{spanGaps:!0},redraw:!0}),r.a.createElement("input",{type:"date",value:this.state.graphStart,onChange:function(e){t.setState({graphStart:e.target.value,graphEnd:t.state.graphEnd,labels:g(e.target.value,t.state.graphStart),dataSetsList:t.state.dataSetsList}),t.updateData()}}),r.a.createElement("input",{type:"date",value:this.state.graphEnd,onChange:function(e){t.setState({graphStart:t.state.graphStart,graphEnd:e.target.value,labels:g(t.state.graphStart,e.target.value),dataSetsList:t.state.dataSetsList}),t.updateData()}}))}}]),e}(n.Component),V=new D.a("9LUUJN34EO841037");function A(){return V}var P=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(u.a)(this,Object(h.a)(e).call(this,t,function(){return{portfolioList:[],addFieldValue:"",graphList:[]}}))).addPortfolio=function(t){t.preventDefault(),a.state.portfolioList.length<10?""!=a.state.addFieldValue&&(a.state.portfolioList.some(function(t){return t===a.state.addFieldValue})?window.alert("Portfolio names should be unique"):a.setState({portfolioList:Object(i.a)(a.state.portfolioList).concat([a.state.addFieldValue]),addFieldValue:"",graphList:a.state.graphList})):window.alert("You can only have 10 portfolios configured at the same time")},a.removePortfolio=function(t){""!=t&&a.setState({portfolioList:a.state.portfolioList.filter(function(e){return e!=t}),addFieldValue:"",graphList:a.state.graphList})},a.getId=function(){return"SPMS-app"},a}return Object(p.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t,e=this,a=this.state.portfolioList.map(function(t){return r.a.createElement(j,{key:t,name:t,onRemove:function(){return e.removePortfolio(t)},onGraphShow:function(t){e.setState({portfolioList:e.state.portfolioList,addFieldValue:e.state.addFieldValue,graphList:t})}})});return t=this.state.graphList.length>0?r.a.createElement(F,{shareList:this.state.graphList,apiConnection:A(),onCloseButtonClick:function(){e.setState({portfolioList:e.state.portfolioList,addFieldValue:e.state.addFieldValue,graphList:[]})}}):null,r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.addPortfolio},r.a.createElement("input",{className:"add-portfolio-field",onChange:function(t){e.setState({portfolioList:e.state.portfolioList,addFieldValue:t.target.value,graphList:e.state.graphList})},type:"text",value:this.state.addFieldValue,placeholder:"Enter portfolio name here and press enter"})),t,r.a.createElement("ul",null,a))}}]),e}(k);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[221,2,1]]]);
//# sourceMappingURL=main.05514c35.chunk.js.map